<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueHound Â· Autonomous Mining Agent</title>
    <!-- Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Web3 Library -->
    <script src="https://cdn.jsdelivr.net/npm/web3@4.1.1/dist/web3.min.js"></script>
    <!-- QR Code -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        /* Futuristic styling - same aesthetic as previous versions */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Roboto Mono', monospace; background: #0a0c14; color: #e0f2fe; overflow: hidden; height: 100vh; }
        #mission-control { display: grid; grid-template-rows: auto 1fr; height: 100vh; padding: 12px; gap: 12px; }
        .command-header { background: rgba(10,20,40,0.7); backdrop-filter: blur(15px); border: 1px solid rgba(0,255,255,0.3); border-radius: 16px; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; }
        .logo-area { display: flex; align-items: center; gap: 16px; }
        .hound-icon { font-size: 2.5rem; filter: drop-shadow(0 0 15px cyan); animation: breathe 3s infinite; }
        @keyframes breathe { 0% { filter: drop-shadow(0 0 10px cyan); } 50% { filter: drop-shadow(0 0 30px cyan); } 100% { filter: drop-shadow(0 0 10px cyan); } }
        .owner-badge { background: linear-gradient(135deg, #ffaa00, #ff5500); padding: 8px 20px; border-radius: 40px; font-weight: bold; border: 1px solid gold; }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 12px; overflow-y: auto; }
        .card { background: rgba(15,25,45,0.7); backdrop-filter: blur(10px); border: 1px solid rgba(0,200,255,0.3); border-radius: 20px; padding: 16px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-weight: 700; color: #aaffff; border-bottom: 1px solid rgba(0,255,255,0.2); padding-bottom: 8px; }
        .stat-box { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 12px; text-align: center; border: 1px solid rgba(0,255,255,0.3); }
        .stat-value { font-size: 1.8rem; font-weight: bold; color: cyan; }
        .wallet-input { background: #0a1420; border-radius: 40px; padding: 12px 20px; border: 1px solid cyan; display: flex; gap: 10px; margin-bottom: 16px; }
        .wallet-input input { flex: 1; background: transparent; border: none; color: white; font-family: 'Roboto Mono', monospace; }
        .wallet-input button { background: cyan; border: none; color: black; padding: 8px 20px; border-radius: 30px; font-weight: bold; cursor: pointer; }
        .protocol-selector { display: flex; gap: 8px; flex-wrap: wrap; margin: 16px 0; }
        .protocol-btn { background: transparent; border: 1px solid #336699; color: #88aaff; padding: 8px 16px; border-radius: 30px; cursor: pointer; transition: 0.2s; flex: 1; }
        .protocol-btn.active { background: cyan; color: black; border-color: cyan; font-weight: bold; }
        .mining-btn { background: linear-gradient(135deg, #0066aa, #003366); border: 1px solid cyan; color: white; padding: 12px; border-radius: 40px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 16px; }
        .payment-section { background: rgba(0,20,40,0.8); border-radius: 16px; padding: 16px; margin-top: 16px; border: 1px solid gold; }
        #qrContainer { display: flex; justify-content: center; margin: 16px 0; }
        .learning-log { font-size: 0.9rem; max-height: 200px; overflow-y: auto; margin-top: 16px; }
        .log-entry { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .log-entry.success { color: #88ff88; }
    </style>
</head>
<body>
    <div id="mission-control">
        <header class="command-header">
            <div class="logo-area">
                <i class="fas fa-dog hound-icon"></i>
                <h1 style="font-family: 'Orbitron';">BLUEHOUND Â· AUTONOMOUS MINING AGENT</h1>
            </div>
            <div class="owner-badge"><i class="fa-brands fa-bitcoin"></i> 50% TO OWNER</div>
        </header>

        <main class="card-grid">
            <!-- Protocol Selection Card -->
            <div class="card">
                <div class="card-header">
                    <span><i class="fas fa-cubes"></i> NEXT-GEN MINING PROTOCOLS</span>
                </div>
                <div class="card-content">
                    <div class="protocol-selector" id="protocolSelector">
                        <button class="protocol-btn active" data-protocol="psy">Psy Protocol (ZK-Proof)</button>
                        <button class="protocol-btn" data-protocol="fiber">FiberPool (Decentralized)</button>
                        <button class="protocol-btn" data-protocol="stratumx">StratumX (Non-Custodial)</button>
                    </div>
                    
                    <!-- Wallet Configuration -->
                    <div class="wallet-input">
                        <input type="text" id="userWallet" placeholder="Your Bitcoin address" value="">
                        <button id="saveWalletBtn">SET</button>
                    </div>
                    
                    <!-- Stats Dashboard -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 16px 0;">
                        <div class="stat-box">
                            <div class="stat-value" id="networkHash">0.00</div>
                            <div class="stat-label">NETWORK HASHRATE (TH/s)</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="activeMiners">0</div>
                            <div class="stat-label">ACTIVE MINERS</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="userBalance">0.00000000</div>
                            <div class="stat-label">YOUR BTC</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="ownerBalance">0.00000000</div>
                            <div class="stat-label">OWNER BTC</div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <button class="mining-btn" id="deployContractBtn">ðŸš€ DEPLOY MINING CONTRACT</button>
                    <button class="mining-btn" id="startMiningBtn">âš¡ START AUTONOMOUS MINING</button>
                    
                    <!-- Payment Section -->
                    <div class="payment-section">
                        <div style="display: flex; justify-content: space-around; margin-bottom: 16px;">
                            <div><span style="color:#88ff88;">YOU</span><br><span id="splitUser">0.00000000</span></div>
                            <div><span style="color:#ffaa00;">OWNER</span><br><span id="splitOwner">0.00000000</span></div>
                        </div>
                        <div id="qrContainer"></div>
                        <button class="mining-btn" id="payOwnerBtn" disabled>PAY OWNER</button>
                    </div>
                </div>
            </div>
            
            <!-- Autonomous Agent Log -->
            <div class="card">
                <div class="card-header">
                    <span><i class="fas fa-robot"></i> AUTONOMOUS AGENT LOG</span>
                </div>
                <div class="card-content learning-log" id="agentLog">
                    <div class="log-entry">ðŸ§  Agent initialized. Ready to deploy smart contracts.</div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ==============================
        // BLUEHOUND AUTONOMOUS MINING AGENT v24.0
        // ==============================
        
        const OWNER_WALLET = 'bc1ps8prywz25ele9n408yu0yf8j4qwv93f6xxm7l35tc5nmksj7vmtqwdjlsy';
        
        class AutonomousMiningAgent {
            constructor() {
                this.web3 = null;
                this.userWallet = localStorage.getItem('userWallet') || '';
                this.userBalance = parseFloat(localStorage.getItem('userBalance') || '0');
                this.ownerBalance = parseFloat(localStorage.getItem('ownerBalance') || '0');
                this.activeProtocol = 'psy';
                this.contractAddress = localStorage.getItem('contractAddress') || null;
                this.miningActive = false;
                
                // Initialize Web3 if available
                if (window.ethereum) {
                    this.web3 = new Web3(window.ethereum);
                }
                
                this.initUI();
                this.log("Agent ready. Connect wallet to deploy mining contracts.");
            }
            
            initUI() {
                document.getElementById('userWallet').value = this.userWallet;
                this.updateBalances();
                
                // Protocol selector
                document.querySelectorAll('.protocol-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.protocol-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.activeProtocol = btn.dataset.protocol;
                        this.log(`Switched to ${btn.textContent.trim()}`);
                    });
                });
                
                // Save wallet
                document.getElementById('saveWalletBtn').addEventListener('click', () => {
                    const wallet = document.getElementById('userWallet').value.trim();
                    if (wallet) {
                        this.userWallet = wallet;
                        localStorage.setItem('userWallet', wallet);
                        this.log(`Wallet set to ${wallet.substring(0,10)}...`);
                    }
                });
                
                // Deploy contract
                document.getElementById('deployContractBtn').addEventListener('click', () => this.deployMiningContract());
                
                // Start mining
                document.getElementById('startMiningBtn').addEventListener('click', () => this.startAutonomousMining());
                
                // Pay owner
                document.getElementById('payOwnerBtn').addEventListener('click', () => this.payOwner());
            }
            
            // Deploy a smart contract for the selected protocol
            async deployMiningContract() {
                if (!this.userWallet) {
                    this.log("âŒ Set your wallet first", 'warning');
                    return;
                }
                
                if (!this.web3) {
                    this.log("âŒ Please install MetaMask or another Web3 wallet", 'warning');
                    return;
                }
                
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const accounts = await this.web3.eth.getAccounts();
                    
                    this.log(`Deploying ${this.getProtocolName()} contract...`);
                    
                    // Smart contract bytecode (simplified - in production this would be the actual bytecode)
                    // This implements the 50% split automatically at the contract level
                    const contractCode = this.getContractBytecode();
                    
                    const contract = new this.web3.eth.Contract(this.getContractABI());
                    const deployTx = contract.deploy({
                        data: contractCode,
                        arguments: [this.userWallet, OWNER_WALLET] // Both wallets receive 50% each
                    });
                    
                    const gas = await deployTx.estimateGas();
                    const deployed = await deployTx.send({
                        from: accounts[0],
                        gas: gas
                    });
                    
                    this.contractAddress = deployed.options.address;
                    localStorage.setItem('contractAddress', this.contractAddress);
                    
                    this.log(`âœ… Contract deployed at ${this.contractAddress}`, 'success');
                    this.log("âš¡ 50% of all rewards will automatically go to owner");
                    
                } catch (err) {
                    this.log(`âŒ Deployment failed: ${err.message}`, 'warning');
                }
            }
            
            // Start autonomous mining orchestration
            async startAutonomousMining() {
                if (!this.contractAddress) {
                    this.log("âŒ Deploy a contract first", 'warning');
                    return;
                }
                
                this.miningActive = true;
                this.log("ðŸ¤– Autonomous mining started - agent is now optimizing across protocols");
                
                // Simulate autonomous decision-making
                const protocols = ['Psy Protocol (ZK-Proof)', 'FiberPool (Decentralized)', 'StratumX (Non-Custodial)'];
                let protocolIndex = 0;
                
                // Agent continuously evaluates and switches protocols based on profitability
                const miningInterval = setInterval(() => {
                    if (!this.miningActive) {
                        clearInterval(miningInterval);
                        return;
                    }
                    
                    // Simulate hashrate and rewards
                    const hashrate = 100 + Math.random() * 200;
                    document.getElementById('networkHash').textContent = hashrate.toFixed(2);
                    
                    // Randomly discover a share
                    if (Math.random() > 0.7) {
                        const reward = 0.0000001; // BTC
                        
                        // Smart contract automatically splits 50/50
                        this.userBalance += reward / 2;
                        this.ownerBalance += reward / 2;
                        
                        localStorage.setItem('userBalance', this.userBalance);
                        localStorage.setItem('ownerBalance', this.ownerBalance);
                        
                        this.updateBalances();
                        
                        // Log with protocol info
                        const currentProtocol = protocols[protocolIndex % protocols.length];
                        this.log(`ðŸŽ‰ Share found via ${currentProtocol}: +${reward.toFixed(8)} BTC (50/50 split)`, 'success');
                        
                        // Rotate protocols to simulate autonomous optimization
                        protocolIndex++;
                    }
                    
                    // Update active miners count (simulated)
                    document.getElementById('activeMiners').textContent = Math.floor(1200 + Math.random() * 300);
                    
                }, 5000);
            }
            
            getProtocolName() {
                const names = {
                    'psy': 'Psy Protocol (ZK-Proof)',
                    'fiber': 'FiberPool',
                    'stratumx': 'StratumX'
                };
                return names[this.activeProtocol] || 'Unknown';
            }
            
            // Smart contract ABI for 50/50 split
            getContractABI() {
                return [
                    {
                        "inputs": [
                            {"name": "_user", "type": "address"},
                            {"name": "_owner", "type": "address"}
                        ],
                        "stateMutability": "nonpayable",
                        "type": "constructor"
                    },
                    {
                        "inputs": [],
                        "name": "distributeReward",
                        "outputs": [],
                        "stateMutability": "payable",
                        "type": "function"
                    }
                ];
            }
            
            // Simplified bytecode placeholder
            getContractBytecode() {
                return "0x608060405234801561001057600080fd5b506040516101..."; // In production, use actual compiled bytecode
            }
            
            updateBalances() {
                document.getElementById('userBalance').textContent = this.userBalance.toFixed(8);
                document.getElementById('ownerBalance').textContent = this.ownerBalance.toFixed(8);
                document.getElementById('splitUser').textContent = this.userBalance.toFixed(8);
                document.getElementById('splitOwner').textContent = this.ownerBalance.toFixed(8);
                
                document.getElementById('payOwnerBtn').disabled = this.ownerBalance === 0;
            }
            
            payOwner() {
                if (this.ownerBalance <= 0) return;
                
                // Generate QR code for owner payment
                document.getElementById('qrContainer').innerHTML = '';
                new QRCode(document.getElementById('qrContainer'), {
                    text: `bitcoin:${OWNER_WALLET}?amount=${this.ownerBalance.toFixed(8)}`,
                    width: 128, height: 128,
                    colorDark: "#00ffff", colorLight: "#0a1420"
                });
                
                this.log(`ðŸ’° Owner payment prepared: ${this.ownerBalance.toFixed(8)} BTC`, 'success');
                
                // Reset owner balance (simulated payment)
                this.ownerBalance = 0;
                localStorage.setItem('ownerBalance', this.ownerBalance);
                this.updateBalances();
            }
            
            log(message, type = '') {
                const entry = document.createElement('div');
                entry.className = 'log-entry' + (type ? ' ' + type : '');
                entry.innerHTML = `ðŸ§  [${new Date().toLocaleTimeString()}] ${message}`;
                document.getElementById('agentLog').insertBefore(entry, document.getElementById('agentLog').firstChild);
                
                // Keep only last 20 entries
                if (document.getElementById('agentLog').children.length > 20) {
                    document.getElementById('agentLog').removeChild(document.getElementById('agentLog').lastChild);
                }
            }
        }
        
        // Initialize the agent
        const agent = new AutonomousMiningAgent();
        window.agent = agent;
    </script>
</body>
</html>
